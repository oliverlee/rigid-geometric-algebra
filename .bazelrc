common --enable_bzlmod=false

build --action_env="BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1"
build --color=yes
build --curses=yes
build --incompatible_strict_action_env
build --ui_actions_shown=20
build --progress_in_terminal_title

build --@bazel_clang_format//:binary=@llvm18_toolchain//:clang-format
build --@bazel_clang_format//:config=//:format-config

build --@rules_clang_tidy//:clang-tidy=@llvm18_toolchain//:clang-tidy
build --@rules_clang_tidy//:clang-apply-replacements=@llvm18_toolchain//:clang-apply-replacements
build --@rules_clang_tidy//:config=//:tidy-config

build:remote --remote_cache=grpcs://oliverlee.buildbuddy.io
build:remote --remote_download_outputs=minimal
build:remote --remote_timeout=3600
build:remote --remote_cache_compression
build:remote --remote_build_event_upload=minimal
build:remote --noslim_profile
build:remote --experimental_profile_include_target_label
build:remote --experimental_profile_include_primary_output
build:remote --nolegacy_important_outputs

test --test_verbose_timeout_warnings

# https://github.com/bazelbuild/bazel/issues/14970#issuecomment-1894565761
coverage --instrumentation_filter=//rigid_geometric_algebra
coverage --combined_report=lcov
coverage --experimental_generate_llvm_lcov

try-import %workspace%/user.bazelrc
